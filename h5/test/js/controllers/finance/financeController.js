define("bannerModel",[],function(){var e=Backbone.Model.extend({url:Mayfle.mayfleApi+"rest/v2.0/base/banners"});return e}),define("meilibaoListModel",[],function(){var e=Backbone.Model.extend({url:Mayfle.xiaodouApi+"product/meili"});return e}),define("crowdfundingListModel",[],function(){var e=Backbone.Model.extend({url:Mayfle.xiaodouApi+"product/crowd"});return e}),define("widget",[],function(){var e={bannerSlider:function(){var e=new fz.Scroll(".ui-slider",{role:"slider",indicator:!0,autoplay:!0,interval:3e3})}};return e}),define("appAgent",[],function(){var e={ua:navigator.userAgent.toLowerCase(),customProtocol:"mayfle://",isWeixinBrowser:function(){return/micromessenger/.test(this.ua)},isApple:function(){return/iphone|ipad|ipod/.test(this.ua)},isAndroid:function(){return/android/.test(this.ua)},isMayfle:function(){return/mayfle/.test(this.ua)}};return e}),define("utility",["appAgent"],function(e){var t={getCity:function(){return e.isMayfle()?mayfleJS.getCity():""},getLonLat:function(){if(e.isMayfle()){var t=mayfleJS.getLonLat(),n=t.split(",")[0],r=t.split(",")[1];return new Array(n,r)}if(navigator.geolocation)return[200,200]},getToken:function(t){if(e.isMayfle())return mayfleJS.requestToken(t)},login:function(t){if(e.isMayfle())return mayfleJS.nativeLogin(t)},formatNumber:function(e){return e=e.toString(),e.length<=3?e:arguments.callee(e.substr(0,e.length-3))+","+e.substr(e.length-3)},getTarget:function(e,t){var n=e.target,r="",i=t&&t.elem?t.elem:"a";return n.nodeName!==i.toUpperCase()?r=$(n).closest(i):r=$(n),r},jumpTo:function(t){var n=this,r=t&&t.url?t.url:"",i=t&&t.host?Mayfle.H5BaseUrl:"",s=t.targetModel?t.targetModel:"h5";e.isMayfle()?s=="native"?r.length>1?r=e.customProtocol+r[1]:r=e.customProtocol+r[0]:r=i+r[0]:r=i+r[0];var o=t.title&&(r.indexOf("?")>0?"&":"?")+"title="+encodeURI(t.title)||"";e.isMayfle()&&e.isApple()&&s=="native"?window.location.hash=r+o:location.href=r+o},scoreToStar:function(e){var t;return e%1==0?t=e:e%1<.3?t=Math.floor(e):e%1>.7?t=Math.round(e):t=Math.floor(e)+"f","star-"+t},addLoading:function(){$(".ui-loading-wrap").length?$(".ui-loading-wrap").html('<p>加载中</p><i class="ui-loading"></i>'):$("body").append('<div class="ui-loading-wrap"><p>加载中</p><i class="ui-loading"></i></div>')},removeLoading:function(){$(".ui-loading-wrap").remove()},noMoreData:function(e){$(".ui-loading-wrap").html(e||"亲，没有更多的数据了！")},fullScreenLoading:"",addFullScreenLoading:function(e){this.fullScreenLoading=$.loading({content:e||"加载中..."})},removeFullScreenLoading:function(){this.fullScreenLoading.loading("hide")},errorMessage:function(){$("body").html('<p style="padding:20px 10px; text-align:center;font-size:16px;">程序员哥哥正在抢修中，请稍后再试！</p>')}};return t}),define("nativejs",["appAgent"],function(e){var t={call:function(e){mayfleJS.call(e)},appVersion:function(){return mayfleJS.versionName()}};return t}),define("financeController",["bannerModel","meilibaoListModel","crowdfundingListModel","widget","utility","nativejs"],function(e,t,n,r,i,s){var o=Backbone.View.extend({el:$(".finance"),bannerModel:new e,meilibaoListModel:new t,crowdfundingListModel:new n,bannerTemplate:_.template($("#bannerTemplate").html()),meifenqiTemplate:_.template($("#meifenqiTemplate").html()),meilibaoTemplate:_.template($("#meilibaoTemplate").html()),events:{"tap  .toImageUrl":"toProject","tap  #applyNow":"toApply","tap  .subscribeNow":"toSubscribe","tap  #Crowdfunding":"toMoreCrowdfunding","tap  .crowdfundingDetail":"toCrowdfundingDetail"},initialize:function(){var e=this;e.bannerModel.fetch({data:{module:1},success:function(t){e.$el.find("#banner").append(e.bannerTemplate(t.toJSON())),r.bannerSlider()}}),e.$el.find("#meifenqi").append(e.meifenqiTemplate()),e.meilibaoListModel.fetch({success:function(t){e.$el.find("#meilibao").append(e.meilibaoTemplate(t.toJSON()))}})},toProject:function(e){var t=i.getTarget(e,{elem:"li"}),n=$(t).attr("data-type"),r=$(t).attr("data-target");if($(t).attr("data-url")=="")var s="Null";else var s=$(t).attr("data-url");var o=$(t).attr("data-ptype"),u="webapp/banner/target.html?ptype="+o+"&target="+r+"&type="+n+"&url="+s;i.jumpTo({url:[u],host:!0,targetModel:"native"})},toApply:function(){i.jumpTo({url:["webapp/installment/apply_step_1.html"],host:!0,title:"申请美丽分期",targetModel:"native"})},toSubscribe:function(e){var t=i.getTarget(e),n=t.attr("data-id");i.jumpTo({url:["webapp/finance/meilibao.html?id="+n],host:!0,title:"美丽宝",targetModel:"h5"})},toMoreCrowdfunding:function(){i.jumpTo({url:["webapp/finance/crowdfunding.html"],host:!0,title:"美疯啦众筹",targetModel:"h5"})},toCrowdfundingDetail:function(e){var t=i.getTarget(e),n=$(t).attr("data-url"),r=$(t).attr("data-title");i.jumpTo({url:[n],host:!1,title:r,targetModel:"h5"})}});return new o});